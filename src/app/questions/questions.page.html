<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="tittle">
      <figure><img src="assets/icon/logo.png" class="logo fade-in" alt="ACS Bucal Logo" /></figure>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="container slide-up">
    <div class="questions-section">
      
      <!-- Question Card - Layout Original Mantido -->
      <ion-card *ngFor="let q of current_q.question" class="question-card">
        <ion-card-header *ngIf="end == false" class="question-header">
          <h3 class="question-text">{{q}}</h3>
        </ion-card-header>

        <!-- Options when question is active -->
        <div *ngIf="resposta == 'stay' && end == false" class="options-container">
          <ion-button 
            *ngFor="let o of current_q.options" 
            expand="block" 
            (click)="results(o)"
            class="option-button"
          >
            {{o.description}}
          </ion-button>
        </div>

        <!-- Answer explanation when answered incorrectly -->
        <div *ngIf="resposta == 'false' && end == false" class="answer-container">
          <div class="disabled-options">
            <ion-button 
              *ngFor="let o of current_q.options" 
              expand="block" 
              [disabled]="true"
              class="option-button disabled"
            >
              {{o.description}}
            </ion-button>
          </div>
          
          <div class="explanation-section">
            <p *ngFor="let a of current_q.answer" class="answer-text">
              <strong>Resposta:</strong> {{obterTextoResposta(a)}}
            </p>
            <p *ngFor="let c of current_q.comments" class="explanation-text">
              <strong>Explicação:</strong> {{c}}
            </p>
            <p *ngFor="let s of current_q.sources" class="source-text">
              <strong>Fonte:</strong> {{s.name}}
            </p>
          </div>
        </div>

        <!-- Completion message -->
        <div *ngIf="end == true" class="completion-container">
          <div class="completion-message">
            <ion-icon name="checkmark-circle" class="completion-icon"></ion-icon>
            <h2>Parabéns por concluir esse tema!</h2>
          </div>
        </div>
      </ion-card>

      <!-- Success message -->
      <div *ngIf="resposta == 'true'" class="success-message">
        <ion-icon name="checkmark-circle" class="success-icon"></ion-icon>
        <p class="success-text">Parabéns, você acertou!</p>
        <ion-button 
          (click)="continuar()" 
          expand="block"
          class="primary-button"
        >
          Continuar
        </ion-button>
      </div>

      <!-- Continue button for wrong answers -->
      <div *ngIf="resposta == 'false'" class="continue-container">
        <ion-button 
          (click)="continuar()" 
          expand="block"
          class="primary-button"
        >
          Continuar
        </ion-button>
      </div>

      <!-- Back button -->
      <div class="back-container">
        <ion-button 
          expand="block" 
          routerLink="/menu"
          class="secondary-button"
        >
          Voltar
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>

